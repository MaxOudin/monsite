<% if user_signed_in? %>
<div class="row justify-content-center">
  <div class="col-sm-8 my-3">
    <%= form_with url: projets_path, method: :get, class: "d-flex" do %>
      <%= text_field_tag :query,
            params[:query],
            class: "form-control",
            placeholder: "Type a keyword"
        %>
      <%= submit_tag "Search", name: "", class: "btn" %>
    <% end %>
  </div>
</div>
<% end %>

<div class="container-projets">
  <div style="">
    <h3>Mes derniers projets</h3>
    <p>Vous trouverez les précédentes réalisations significatives. Je m'adapte à vos besoins pour réaliser, ensemble, le site qui vous ressemble. Pour chacun des projets, vous avez la possibilité de voir les outils utilisés et un texte descriptif de celui-ci.</p>
  </div>
  <div class="container-cartes">

    <% if @projets.last != nil %>
      <% @projets.each do |projet| %>
        <div class="container-une-carte" style="border: 1px solid <%= projet.couleur %>;">
          <a href="<%= projet_path(projet.titre.gsub(' ', '-')) %>">
          <div class="card-img">
            <img src="<%= projet.image_url%>" alt="Projet <%= projet.titre %>">
          </div>
          <div class="card-text">
            <h3><%= projet.titre %></h3>
            <h3 style="color: <%= projet.couleur %> !important;"><%= projet.type_projet.upcase %></h3>
            <p><%= truncate(projet.description, length: 300) %></p>
          </div>
          </a>
        </div>
      <% end %>

    <% else %>
      <p>Aucun projet n'a été retrouvé</p>
    <% end %>
  </div>
  <div style="display: flex; justify-content: flex-end; margin-top: 5vh; margin-bottom: 3vh;">
    <a href="/" class="btn retour-accueil-btn">Retour à l'accueil</a>
  </div>
</div>
