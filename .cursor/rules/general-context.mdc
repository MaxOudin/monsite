---
description: Contexte général de l'application - Portfolio personnel Rails avec Bun, Tailwind CSS, PostgreSQL
globs: 
alwaysApply: true
---

# Contexte Général de l'Application

Cette application est un portfolio personnel présentant des projets de développement web et des articles. Elle permet de mettre en avant les réalisations techniques et les réflexions personnelles à travers des articles.

## Technologies Utilisées

- **Ruby 3.3.7** : Langage de programmation principal
- **Rails 7.2** : Framework web Ruby
- **Bun** : Gestionnaire de paquets JavaScript et runtime (utilisé à la place de npm, yarn, pnpm, ou Node.js)
- **PostgreSQL** : Base de données relationnelle utilisée pour stocker toutes les données de l'application
- **Tailwind CSS** : Framework CSS utilitaire utilisé pour le styling du frontend (classes utilitaires dans les vues ERB)
- **Docker** : Containerisation pour le déploiement
- **Traefik** : Reverse proxy avec gestion automatique des certificats SSL
- **VPS Ubuntu** : Serveur Linux Ubuntu pour l'hébergement

## Rôles et Permissions

- Un utilisateur connecté peut créer, modifier et supprimer du contenu pour les projets et les articles
- Un seul user créé (moi-même) et pas de registration possible
- Authentification via Devise avec JWT pour l'API

## Conventions et Bonnes Pratiques

> **Note** : Pour les détails complets sur les conventions, voir les fichiers de règles dédiés :
> - `ruby-rails-conventions.mdc` : Conventions Ruby/Rails, DRY, Convention over Configuration
> - `tailwind-css-guidelines.mdc` : Guidelines Tailwind CSS et Mobile First
> - `use-bun-instead-of-node-vite-npm-pnpm.mdc` : Utilisation de Bun
> - `deployment-docker-traefik-nginx.mdc` : Déploiement Docker, Traefik, Nginx, VPS Ubuntu

### Principes Fondamentaux

- **DRY (Don't Repeat Yourself)** : Éviter toute duplication de code
- **Convention over Configuration** : Suivre les conventions Rails pour réduire la configuration manuelle
- **Responsabilité Unique** : Respecter le principe de responsabilité unique pour chaque classe ou module
- **Mobile First** : Chaque ligne de code HTML doit être pensée en mobile first, puis adaptée pour le desktop

### Organisation du Code

- **Services** : Utiliser des services dans `app/services/` pour encapsuler la logique métier complexe
- **Policies Pundit** : Utiliser Pundit pour gérer les autorisations (pas encore implémenté)
- **Concerns** : Utiliser des concerns pour partager des comportements entre modèles
- **Helpers** : Utiliser les helpers pour la logique de présentation réutilisable
- **PG Search** : Utiliser PG Search pour les fonctionnalités de recherche

## Sécurité

- **Injections SQL** : Protéger contre les injections SQL en utilisant des requêtes paramétrées (ActiveRecord le fait automatiquement)
- **Strong Parameters** : Toujours utiliser strong parameters pour protéger contre les attaques de mass assignment
- **Policies** : Utiliser des policies Pundit pour gérer les autorisations
- **Validation des Entrées** : Valider les entrées utilisateur dans les modèles pour éviter les failles de sécurité
- **HTTPS** : Utiliser HTTPS uniquement en production (géré par Traefik avec Let's Encrypt)

## Performances

- **Requêtes SQL** : Optimiser les requêtes SQL pour éviter les problèmes N+1 (utiliser `includes` ou `preload`)
- **Indexation** : Utiliser des index sur les colonnes fréquemment recherchées
- **Cache** : Mettre en cache les données fréquemment utilisées
- **Jobs Asynchrones** : Utiliser des jobs asynchrones pour les tâches longues (emails, notifications, etc.)
- **Assets** : Précompiler les assets en production

## Modularité et Réutilisabilité

- **Organisation du Code** : Organiser le code en modules et en services pour une meilleure réutilisabilité
- **Partials ERB** : Utiliser les partials pour réutiliser des vues
- **Scopes** : Utiliser les scopes dans les modèles pour réutiliser des requêtes

## Modèles Principaux et Relations

- **User** : Utilisateur de l'application créant du contenu (à savoir moi)
- **Articles** : Articles d'actualité ou sur des sujets tenant à cœur
- **Projets** : Projets réalisés décrits
- **Outils** : Outils techniques utilisés
- **OutilProjet** : Relation Many:Many entre Projet et Outil
- **Service** : Services proposés
- **Sujet** : Sujets pour catégoriser les articles

## Logique Métier

- **Gestion de Contenu** : Création, modification et suppression de projets et d'articles
- **Gestion des Outils** : Association des outils techniques aux projets
- **Recherche** : Recherche full-text avec PG Search
- **SEO** : Gestion des meta tags, structured data, sitemap

## Fonctionnalités Clés

- Visualisation et gestion du contenu
- Recherche full-text
- Gestion des assets (images, fichiers)
- API REST avec authentification JWT
- Sitemap automatique

## Services et Intégrations

- **PostgreSQL** : Base de données principale de l'application
- **AWS S3** : Stockage de fichiers (Active Storage)
- **Redis** : Cache et Action Cable
- **Traefik** : Reverse proxy avec gestion automatique des certificats SSL
- **Docker** : Containerisation pour le déploiement

## Structure du Projet

- **Organisation MVC** : Organisation standard Rails avec MVC
- **Services** : Services pour les opérations complexes (`app/services/`)
- **Policies** : Policies Pundit pour les autorisations (`app/policies/`)
- **Concerns** : Concerns pour partager des comportements (`app/models/concerns/`, `app/controllers/concerns/`)
- **Helpers** : Helpers pour la logique de présentation (`app/helpers/`)

## Environnement de Développement

- **Bun** : Gestionnaire de paquets JavaScript (utiliser `bun install` au lieu de `npm install`)
- **Dotenv** : Variables d'environnement (`.env` en développement)
- **Letter Opener** : Test des emails en développement
- **Annotate** : Documentation des modèles (annotations automatiques)
- **Foreman** : Gestion des processus en développement (`bin/dev`)

## Frontend et Styling

- **Mobile First** : Chaque ligne de code HTML doit être pensée en mobile first, puis adaptée pour le desktop. Commencer par les styles de base (mobile), puis utiliser les breakpoints Tailwind (`sm:`, `md:`, `lg:`, `xl:`, `2xl:`) pour les adaptations desktop
- **Tailwind CSS** : Utiliser les classes Tailwind directement dans les vues ERB pour le styling
- **Assets** : Les assets JavaScript et CSS sont compilés via le pipeline d'assets Rails avec Bun
- **Propshaft** : Pipeline d'assets Rails moderne
- **Hotwire** : Turbo et Stimulus pour les interactions JavaScript
